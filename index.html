
<!--


<!doctype html>
<html>
    <head>
         <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
        <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-detector.js"></script>
        <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-handler.js"></script>
        <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
        <script src="https://github.com/gftruj/webzamples/tree/master/arjs/sound/index.html"></script>

    </head>



<body>
 





       <script>
    document.addEventListener('DOMContentLoaded', function () {
        setTimeout(function () {
            var welcomeScreen = document.getElementById('welcomeScreen');
            welcomeScreen.classList.add('fadeOut');
            setTimeout(function () {
                welcomeScreen.style.display = 'none'; 
            }, 1000); 
        }, 5000);
    });
</script>



 <a-assets>
     
        <a-asset-item id="immagine" src="assets/39/asset.glb"></a-asset-item>
        <a-asset-item id="depth" src="assets/39/asset.glb"></a-asset-item>


    </a-assets>

  

     <a-scene vr-mode-ui="enabled: false;" loading-screen="enabled: false;" device-orientation-permission-ui="enabled: false"
        arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;" id="scene" embedded gesture-detector >
        
        <a-marker type="pattern" preset="custom" url="assets/39/marker.patt" raycaster="objects: .clickable"
            emitevents="true" cursor="fuse: false; rayOrigin: mouse;" id="markerA"
            markerfound="resetModelOpacity('profondita')" markerlost="startFadeTimer('profondita')">
            
            <a-entity id="profondita" position="0 0 0" scale="1 1 1" gltf-model="#depth" class="clickable" gesture-handler="0 0 0" animation-mixer="loop: repeat"></a-entity>
                
        </a-marker>



        <a-entity camera></a-entity>
    </a-scene>
         







    </body>
</html>


-->



<!DOCTYPE html>
<html>
  <head>
    <title>Progetto AR con AlvaAR e SLAM</title>
    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <!-- AlvaAR per SLAM -->
    <script src="https://unpkg.com/alvaar"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <!-- A-Frame scene with AlvaAR -->
    <a-scene embedded arjs>
      <!-- Caricamento del modello 3D -->
      <a-assets>
        <!-- Aggiungi il percorso al tuo file .glb -->
        <a-asset-item id="my-3d-model" src="assets/GPS/PIAZZALE SANTUARIO Definitivo.glb"></a-asset-item>
      </a-assets>
      <!-- Oggetto 3D -->
      <a-gltf-model src="#my-3d-model" scale="0.5 0.5 0.5" position="0 0 -2"></a-gltf-model>
      <!-- Camera con AlvaAR per SLAM -->
      <a-camera gps-camera="minDistance: 1; positionMinAccuracy: 100;">
        <alvaar-camera></alvaar-camera>
      </a-camera>
    </a-scene>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Configura la geolocalizzazione
        if ('geolocation' in navigator) {
          navigator.geolocation.getCurrentPosition(function(position) {
            console.log('Geolocalizzazione attiva');
          }, function(error) {
            if (error.code == error.PERMISSION_DENIED) {
              alert('Per favore, abilita i servizi di geolocalizzazione per utilizzare questa funzionalit√†.');
            }
          });
        } else {
          alert('Geolocalizzazione non supportata dal browser.');
        }

        // Inizializza AlvaAR con opzioni GPS
        const scene = document.querySelector('a-scene').object3D;
        const camera = document.querySelector('a-camera').object3D;
        const locationBased = new AlvaAR.LocationBased(scene, camera, {
          gpsMinDistance: 10,
          gpsMinAccuracy: 100
        });

        locationBased.startGps();

        // Aggiungi un oggetto basato su GPS
        locationBased.add(new THREE.Mesh(new THREE.BoxGeometry(1, 1, 1), new THREE.MeshBasicMaterial({ color: 0xff0000 })), 45.464211, 9.191383, 100);

        // Ascolta gli aggiornamenti GPS
        locationBased.on('gpsupdate', function(position) {
          console.log('Posizione aggiornata:', position);
        });

        locationBased.on('gpserror', function(error) {
          console.log('Errore GPS:', error);
        });
      });
    </script>
  </body>
</html>
